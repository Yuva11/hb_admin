<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" >

	<h:form id="brands_form" prependId="false" enctype="multipart/form-data">
	<p:outputPanel id="BrandPanelForm" rendered="true"> 
	<div class="brand_content_box">
			<!-- Brand Name Starts Here -->
			<div class="text_width_box025">
				<span class="tab_user_text">Brand Name</span>
			</div>
			<div class="text_width_box025_right">
				<h:inputText id="BrandName" 
					disabled="#{groupEntityBean.action eq 'VIEW'}"
					value="#{groupEntityBean.brandEntity.name}" class="brand_text_box"
					required="true" requiredMessage="#{msg['validate.brandname']}"
					validatorMessage="#{msg['validate.brandname']}" tabindex="1">
					<f:validateLength minimum="4" maximum="75" />
				</h:inputText>
				<p:watermark for="BrandName" value="4 to 75 characters"
					id="BrandName-watermark" />
				<h:outputText styleclass="brand_text_box" rendered="false"
					value="#{groupEntityBean.brandEntity.name}" />
				<span class="star"> <p:outputPanel
						rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel>
				</span>
			</div>
			<div class="text_width_box25"></div>
			<div class="text_width_box25_right_error">
				<p:message for="BrandName" />
			</div>
			<!-- Brand Name Ends Here -->
			<!-- Brand Category Starts Here -->
				 <div class="text_width_box25">
					<span class="user_text">Brand Category</span>
				</div>
				<div class="text_width_box25_right">
					<h:selectOneMenu id="BrandCategory"
						disabled="#{groupEntityBean.action eq 'VIEW'}"
						value="#{groupEntityBean.brandEntity.category}" converter="gec"
						class="brand_drodown_box" required="true"
						requiredMessage="#{msg['validate.category']}" tabindex="2">
						<f:selectItem itemLabel="Select" itemValue="#{null}" />
						<f:selectItems value="#{groupEntityBean.categoryList}" var="it"
							itemLabel="#{it.name}" itemValue="#{it}" />

					</h:selectOneMenu>
					<h:outputText styleclass="brand_text_box" rendered="false"
						value="#{groupEntityBean.brandEntity.category.name}" />
					<span class="star"> <p:outputPanel
							rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel>
					</span>
				</div>
				<div class="text_width_box25"></div>
				<div class="text_width_box25_right_error">
					<p:message for="BrandCategory" />
				</div>


<!-- eNDS here -->

				<div class="text_width_box025">
					<span class="tab_user_text">Brand Speciality </span>
				</div>
				<div class="text_width_box025_right">
					<h:selectOneMenu id="BrandSpeciality"
						disabled="#{groupEntityBean.action eq 'VIEW'}"
						value="#{groupEntityBean.brandEntity.speciality}" converter="gec"
						class="brand_drodown_box" tabindex="3" required="true"
						requiredMessage="#{msg['validate.speciality']}">
						<f:selectItem itemLabel="Select" itemValue="#{null}" />
						<f:selectItems value="#{groupEntityBean.specialityList}" var="it"
							itemLabel="#{it.name}" itemValue="#{it}" />
					</h:selectOneMenu>
					<span class="star"> <p:outputPanel
							rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel></span>
					<h:outputText styleclass="text_box1" rendered="false"
						value="#{groupEntityBean.brandEntity.speciality.name}" />
				</div>
				<div class="text_width_box25"></div>
				<div class="text_width_box25_right_error">
					<p:message for="BrandSpeciality" />
				</div>
					
<!-- enDS hERE -->
				<div class="text_width_box25">
					<span class="user_text">Party Deal Allowed</span>
				</div>
				<div class="text_width_box25_right">
					<h:selectOneMenu id="PartyDealAllowed"
						disabled="#{groupEntityBean.action eq 'VIEW'}"
						value="#{groupEntityBean.brandEntity.partyDealAllowed}"
						class="brand_drodown_box" tabindex="4" required="true"
						requiredMessage="#{msg['validate.deal']}">
						<f:selectItem itemLabel="Yes" itemValue="#{true}" />
						<f:selectItem itemLabel="No" itemValue="#{false}" />

					</h:selectOneMenu>
					<h:outputText styleclass="text_box1" rendered="false"
						value="#{groupEntityBean.brandEntity.partyDealAllowed}" />
					<span class="star"> <p:outputPanel
							rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel></span>

				</div>
				<div class="text_width_box25"></div>
			<div class="text_width_box25_right_error">
				<p:message for="PartyDealAllowed" />
			</div>
				 
				<!-- Brand Brand Url Starts Here -->
			<div class="text_width_box025">
				<span class="tab_user_text">Brand Url</span>
			</div>
			<div class="text_width_box025_right">
				<h:inputText id="webUrl"
					disabled="#{groupEntityBean.action eq 'VIEW'}"
					value="#{groupEntityBean.brandEntity.webUrl}"
					class="brand_text_box" tabindex="5">
					<f:validateLength minimum="4" maximum="75" /> 
				</h:inputText>
				<p:watermark for="webUrl" value="www.hungrybells.in"
					id="webUrl-watermark" />
				<h:outputText styleclass="brand_text_box" rendered="false"
					value="#{groupEntityBean.brandEntity.webUrl}" />
			</div>
				
				<!-- Status -->
				<div class="text_width_box25">
					<span class="user_text">Status</span>
				</div>
				<div class="text_width_box25_right">
					<h:selectOneMenu value="#{groupEntityBean.brandEntity.status}"
						class="brand_drodown_box" tabindex="6"
						disabled="#{groupEntityBean.action eq 'VIEW'}">
						<f:selectItem itemLabel="Active" itemValue="ACTIVE" />
						<f:selectItem itemLabel="Blocked" itemValue="BLOCKED" />
					</h:selectOneMenu>
					<h:outputText styleclass="brand_text_box" rendered="false"
						value="#{groupEntityBean.brandEntity.status}" />
					<span class="star"> <p:outputPanel
							rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel>
					</span>
				</div>
				
				
				<!-- Status eNDS-->
				 
		</div>
		
		<div class="brand_content_box">
		
			<div class="text_width_box25">
				<span class="user_text">Brand Code</span>
			</div>
			<div class="text_width_box25_right">
				<h:inputText id="BrandCode" disabled="#{groupEntityBean.brandAction ne 'ADD' }"
					value="#{groupEntityBean.brandEntity.code}" class="brand_code_box"
					required="true" 
					 minlength="3" maxlength="3"
					onkeydown=" return checkCode(event);"
					requiredMessage="Brand Code should not be empty"
					validatorMessage="Brand Code should not be empty" 
					tabindex="1">
					<f:validateLength minimum="3" maximum="3" />
				</h:inputText> 
				<p:commandLink value="Check" rendered="false" tabindex="13" process="BrandCode @this" action="#{groupEntityBean.checkCodeAvail}" />
				<span class="star"><p:outputPanel
						rendered="#{groupEntityBean.action ne 'VIEW'}">*</p:outputPanel></span>
			</div>
			<div class="text_width_box25"></div>
			<div class="text_width_box25_right_error">
				<p:message id="CodeValidation" for="BrandCode" />
			</div> 
		 
		</div>
		
		 
	<div class="brand_content_box_right">
			<div class="upload_box">
				<p:outputPanel id="TEMPIMAGE_MAIN"> 
					<img src="data:image/jpeg;base64,#{groupEntityBean.imageString}"
						width="100%" height="90" />
				</p:outputPanel>
			</div>
			<div class="upload_button"> 
				<p:fileUpload id="fupload" label=""
					value="#{groupEntityBean.file}" styleClass="upload_button"
					requiredMessage="Please upload Logo" required="true" auto="true"
					multiple="false" immediate="false"
					fileUploadListener="#{groupEntityBean.myFileUpload}"
					update="TEMPIMAGE_MAIN"
					rendered="#{groupEntityBean.action ne 'VIEW'}">
					<!-- <img  src="#{request.contextPath}/images/upload_image.png" /> -->
				</p:fileUpload> 
			</div>
			 
		</div>
		<div class="brand_action_box">
		<div class="cancel_button"> 
			<h:commandLink value="Submit" tabindex="13" update="BrandListPanel"  immediate="false" 
				validateClient="true" action="#{groupEntityBean.submitBrand}" />
				
					<h:commandLink value="Cancel" tabindex="14" immediate="true" 
						action="#{groupEntityBean.showList}" />
		</div>
		</div>
			</p:outputPanel>
			<div class="contant_table_box">
			<p:outputPanel id="BrandListPanel" rendered="#{not empty groupEntityBean.brandEntityList}">
			<p:dataTable value="#{groupEntityBean.brandEntityList}"  var="it" widgetVar="roletable"
				paginator="true" paginatorPosition="bottom" rows="21" rowIndexVar="idx"
				currentPageReportTemplate="{currentPage} / {totalPages}" 
				paginatorTemplate=" {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="20,50,100,500,1000" styleClass="reference">

				<p:column headerText="#">
					<h:outputText value="#{idx+1}" />
				</p:column>
				<p:column headerText="Brand Logo">
					<img style="width:180px;height:73px;" src="#{groupEntityBean.serviceURL}/images/merchant/MERCHANT_#{it.id}.png" />
				</p:column>
				<p:column headerText="Brand Name">
					<h:outputText value="#{it.name}" />
				</p:column>
				<p:column headerText="Category">
					<p:outputPanel id="CategoryPanel" rendered="#{not empty it.category}">
						<h:outputText value="#{it.category.name}" />
					</p:outputPanel>
				</p:column>
				<p:column headerText="Speciality">
					<p:outputPanel id="SpecialityPanel" rendered="#{not empty it.speciality}">
						<h:outputText value="#{it.speciality.name}" />
					</p:outputPanel>
				</p:column>
				<p:column headerText="Status">
					<h:outputText value="#{it.status}" />
				</p:column>
				<p:column headerText="Action"> 
					<p:commandLink action="#{groupEntityBean.showEditBrand}" 
						update=":BasicInfo:brands_form" process="@this" id="EditBranch"  immediate="true" >
						<img src="#{request.contextPath}/images/edit-small-icon.png" title="Edit" alt="Edit" border="0" />
						<f:setPropertyActionListener target="#{groupEntityBean.brandAction}" value="EDIT"/>
						<f:setPropertyActionListener target="#{groupEntityBean.brandEntity}" value="#{it}"/> 
					</p:commandLink> 
					<h:commandLink action="#{groupEntityBean.showAddBank}" immediate="true" >
						<img src="#{request.contextPath}/images/bank.png" title="Bank" alt="Bank" border="0" /> 
						<f:setPropertyActionListener target="#{groupEntityBean.bankAction}" value="ADD"/>
						<f:setPropertyActionListener target="#{groupEntityBean.brandEntity}" value="#{it}"/> 
					</h:commandLink> 
					<h:commandLink action="#{groupEntityBean.showAddBranch}" immediate="true" >
						<img src="#{request.contextPath}/images/outlets.png" title="Outlets" alt="Outlets" border="0" /> 
						<f:setPropertyActionListener target="#{groupEntityBean.branchAction}" value="ADD"/>
						<f:setPropertyActionListener target="#{groupEntityBean.brandEntity}" value="#{it}"/> 
					</h:commandLink> 
				</p:column>
  
			</p:dataTable>
</p:outputPanel>


		</div>
	</h:form>
</ui:composition>